# Структура проекта MeetingAssistant

## Структура Solution

```
MeetingAssistant/
├── MeetingAssistant.sln
├── .gitignore
├── README.md
│
├── MeetingAssistant.Domain/
│   ├── MeetingAssistant.Domain.csproj
│   ├── Entities/
│   │   ├── Meeting.cs
│   │   ├── MeetingRecording.cs
│   │   ├── MeetingReport.cs
│   │   ├── TranslationRequest.cs
│   │   ├── TranslationResult.cs
│   │   ├── ExampleReportTemplate.cs
│   │   └── AudioSource.cs
│   ├── Enums/
│   │   ├── Language.cs
│   │   ├── MeetingStatus.cs
│   │   ├── AudioSourceType.cs
│   │   ├── TranslationStatus.cs
│   │   └── WindowState.cs
│   ├── ValueObjects/
│   │   ├── AudioSettings.cs
│   │   ├── WindowSettings.cs
│   │   └── ApiConfiguration.cs
│   └── Interfaces/
│       ├── IMeetingRepository.cs
│       ├── IRecordingRepository.cs
│       ├── IReportRepository.cs
│       ├── ITemplateRepository.cs
│       └── ITranslationRepository.cs
│
├── MeetingAssistant.Application/
│   ├── MeetingAssistant.Application.csproj
│   ├── UseCases/
│   │   ├── Meeting/
│   │   │   ├── StartMeetingUseCase.cs
│   │   │   ├── StopMeetingUseCase.cs
│   │   │   ├── ProcessMeetingRecordingUseCase.cs
│   │   │   └── GenerateMeetingReportUseCase.cs
│   │   ├── Translation/
│   │   │   ├── ListenToInterlocutorUseCase.cs
│   │   │   ├── ListenToUsUseCase.cs
│   │   │   └── TranslateTextUseCase.cs
│   │   ├── Template/
│   │   │   ├── LoadExampleTemplateUseCase.cs
│   │   │   └── ValidateTemplateUseCase.cs
│   │   └── Settings/
│   │       ├── UpdateWindowSettingsUseCase.cs
│   │       └── UpdateAudioSettingsUseCase.cs
│   ├── DTOs/
│   │   ├── MeetingDTO.cs
│   │   ├── RecordingDTO.cs
│   │   ├── ReportDTO.cs
│   │   ├── TranslationDTO.cs
│   │   └── SettingsDTO.cs
│   └── Services/
│       ├── IMeetingService.cs
│       ├── MeetingService.cs
│       ├── ITranslationService.cs
│       ├── TranslationService.cs
│       ├── IReportGenerationService.cs
│       ├── ReportGenerationService.cs
│       └── IAudioProcessingService.cs
│
├── MeetingAssistant.Infrastructure/
│   ├── MeetingAssistant.Infrastructure.csproj
│   ├── ExternalServices/
│   │   ├── OpenAI/
│   │   │   ├── IOpenAIClient.cs
│   │   │   ├── OpenAIClient.cs
│   │   │   ├── OpenAITranscriptionService.cs
│   │   │   ├── OpenAITranslationService.cs
│   │   │   ├── OpenAIReportGenerationService.cs
│   │   │   └── Models/
│   │   │       ├── TranscriptionRequest.cs
│   │   │       ├── TranscriptionResponse.cs
│   │   │       ├── TranslationRequest.cs
│   │   │       ├── TranslationResponse.cs
│   │   │       ├── ChatRequest.cs
│   │   │       └── ChatResponse.cs
│   │   └── Audio/
│   │       ├── IAudioRecorder.cs
│   │       ├── AudioRecorder.cs
│   │       ├── IAudioCaptureService.cs
│   │       ├── MicrophoneCaptureService.cs
│   │       ├── StereoMixCaptureService.cs
│   │       ├── AudioFormatConverter.cs
│   │       └── Models/
│   │           ├── AudioFormat.cs
│   │           └── AudioDevice.cs
│   ├── Repositories/
│   │   ├── MeetingRepository.cs
│   │   ├── RecordingRepository.cs
│   │   ├── ReportRepository.cs
│   │   ├── TemplateRepository.cs
│   │   └── TranslationRepository.cs
│   ├── FileSystem/
│   │   ├── IFileService.cs
│   │   ├── FileService.cs
│   │   ├── IFileParser.cs
│   │   ├── TextFileParser.cs
│   │   ├── WordFileParser.cs
│   │   └── FileParserFactory.cs
│   ├── Storage/
│   │   ├── IStorageService.cs
│   │   ├── LocalStorageService.cs
│   │   └── StoragePaths.cs
│   └── Configuration/
│       ├── IConfigurationService.cs
│       ├── ConfigurationService.cs
│       └── AppSettings.cs
│
├── MeetingAssistant.Presentation/
│   ├── MeetingAssistant.Presentation.csproj
│   ├── App.xaml
│   ├── App.xaml.cs
│   ├── Views/
│   │   ├── MainWindow.xaml
│   │   ├── MainWindow.xaml.cs
│   │   ├── Controls/
│   │   │   ├── OriginalTextControl.xaml
│   │   │   ├── OriginalTextControl.xaml.cs
│   │   │   ├── TranslatedTextControl.xaml
│   │   │   ├── TranslatedTextControl.xaml.cs
│   │   │   ├── RecordingControl.xaml
│   │   │   ├── RecordingControl.xaml.cs
│   │   │   ├── TranslationControl.xaml
│   │   │   └── TranslationControl.xaml.cs
│   │   └── Dialogs/
│   │       ├── LoadTemplateDialog.xaml
│   │       ├── LoadTemplateDialog.xaml.cs
│   │       ├── SettingsDialog.xaml
│   │       └── SettingsDialog.xaml.cs
│   ├── ViewModels/
│   │   ├── BaseViewModel.cs
│   │   ├── MainViewModel.cs
│   │   ├── MeetingViewModel.cs
│   │   ├── TranslationViewModel.cs
│   │   ├── ReportViewModel.cs
│   │   └── SettingsViewModel.cs
│   ├── Services/
│   │   ├── IDialogService.cs
│   │   ├── DialogService.cs
│   │   ├── IWindowService.cs
│   │   ├── WindowService.cs
│   │   └── INotificationService.cs
│   ├── Converters/
│   │   ├── LanguageToStringConverter.cs
│   │   ├── StatusToColorConverter.cs
│   │   └── BooleanToVisibilityConverter.cs
│   ├── Commands/
│   │   ├── RelayCommand.cs
│   │   └── AsyncRelayCommand.cs
│   └── Resources/
│       ├── Styles/
│       │   ├── ButtonStyles.xaml
│       │   └── WindowStyles.xaml
│       ├── Icons/
│       │   ├── record.png
│       │   ├── stop.png
│       │   └── translate.png
│       └── Localization/
│           ├── Resources.ru-RU.resx
│           ├── Resources.pl-PL.resx
│           └── Resources.en-US.resx
│
├── MeetingAssistant.Core/
│   ├── MeetingAssistant.Core.csproj
│   ├── Extensions/
│   │   ├── StringExtensions.cs
│   │   ├── DateTimeExtensions.cs
│   │   └── EnumExtensions.cs
│   ├── Helpers/
│   │   ├── AudioHelper.cs
│   │   ├── FileHelper.cs
│   │   └── LanguageHelper.cs
│   ├── Exceptions/
│   │   ├── MeetingException.cs
│   │   ├── TranslationException.cs
│   │   ├── ApiException.cs
│   │   ├── AudioException.cs
│   │   └── FileException.cs
│   └── Logging/
│       ├── ILogger.cs
│       └── FileLogger.cs
│
├── MeetingAssistant.Tests/ (опционально, для будущего)
│   ├── MeetingAssistant.Tests.csproj
│   ├── Domain.Tests/
│   │   ├── Entities/
│   │   └── ValueObjects/
│   ├── Application.Tests/
│   │   ├── UseCases/
│   │   └── Services/
│   └── Infrastructure.Tests/
│       ├── Repositories/
│       └── ExternalServices/
│
└── INFO/
    ├── Идея.txt
    ├── Архитектура.md
    ├── Диаграммы_и_зависимости.md
    └── Структура_проекта.md
```

---

## Структура папок данных (Runtime)

```
MeetingAssistant/
├── Recordings/              # Записи совещаний
│   ├── 2024-01-15_10-30-00_meeting_001.wav
│   └── 2024-01-15_14-20-00_meeting_002.wav
│
├── Reports/                 # Сгенерированные отчеты
│   ├── 2024-01-15_10-30-00_report_001.md
│   └── 2024-01-15_14-20-00_report_002.md
│
├── Templates/               # Загруженные шаблоны
│   ├── example_template_001.txt
│   └── example_template_002.docx
│
├── Logs/                    # Логи приложения
│   ├── app_2024-01-15.log
│   └── error_2024-01-15.log
│
└── Config/                  # Конфигурационные файлы
    ├── appsettings.json
    └── user_settings.json
```

---

## Зависимости проектов (Project References)

### MeetingAssistant.Domain
- **Зависимости**: Нет (чистый доменный слой)
- **NuGet пакеты**: Нет

### MeetingAssistant.Application
- **Зависимости**: 
  - MeetingAssistant.Domain
- **NuGet пакеты**:
  - Microsoft.Extensions.DependencyInjection.Abstractions
  - System.Threading.Tasks.Extensions

### MeetingAssistant.Infrastructure
- **Зависимости**:
  - MeetingAssistant.Domain
  - MeetingAssistant.Application
- **NuGet пакеты**:
  - NAudio (для работы с аудио)
  - DocumentFormat.OpenXml (для Word файлов)
  - System.Text.Json (или Newtonsoft.Json)
  - Microsoft.Extensions.Configuration
  - Microsoft.Extensions.Configuration.Json
  - OpenAI (официальный SDK или HttpClient)

### MeetingAssistant.Presentation
- **Зависимости**:
  - MeetingAssistant.Application
  - MeetingAssistant.Infrastructure
  - MeetingAssistant.Core
- **NuGet пакеты**:
  - Microsoft.Extensions.DependencyInjection
  - Microsoft.Extensions.Hosting
  - MaterialDesignThemes (опционально, для UI)
  - MaterialDesignColors (опционально)

### MeetingAssistant.Core
- **Зависимости**: Нет
- **NuGet пакеты**:
  - Microsoft.Extensions.Logging.Abstractions

---

## Ключевые файлы конфигурации

### appsettings.json
```json
{
  "OpenAI": {
    "ApiKey": "",
    "BaseUrl": "https://api.openai.com/v1",
    "Model": "gpt-4",
    "TranscriptionModel": "whisper-1",
    "MaxTokens": 4000,
    "Temperature": 0.7
  },
  "Audio": {
    "SampleRate": 44100,
    "Channels": 2,
    "BitDepth": 16,
    "Format": "WAV",
    "DefaultMicrophone": "",
    "DefaultStereoMix": "",
    "BufferSize": 4096
  },
  "Storage": {
    "RecordingsPath": "./Recordings",
    "ReportsPath": "./Reports",
    "TemplatesPath": "./Templates",
    "LogsPath": "./Logs"
  },
  "Window": {
    "Opacity": 0.9,
    "AlwaysOnTop": false,
    "DefaultLanguage": "Russian",
    "MinOpacity": 0.3,
    "MaxOpacity": 1.0
  },
  "Translation": {
    "RealTimeEnabled": true,
    "AutoDetectLanguage": true,
    "BufferDuration": 5
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning"
    },
    "File": {
      "Enabled": true,
      "Path": "./Logs",
      "MaxSize": 10485760,
      "RetentionDays": 30
    }
  }
}
```

### MeetingAssistant.Presentation.csproj
```xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <OutputType>WinExe</OutputType>
    <TargetFramework>net8.0-windows</TargetFramework>
    <UseWPF>true</UseWPF>
    <Nullable>enable</Nullable>
    <LangVersion>latest</LangVersion>
  </PropertyGroup>
  
  <ItemGroup>
    <ProjectReference Include="..\MeetingAssistant.Application\MeetingAssistant.Application.csproj" />
    <ProjectReference Include="..\MeetingAssistant.Infrastructure\MeetingAssistant.Infrastructure.csproj" />
    <ProjectReference Include="..\MeetingAssistant.Core\MeetingAssistant.Core.csproj" />
  </ItemGroup>
  
  <ItemGroup>
    <PackageReference Include="Microsoft.Extensions.DependencyInjection" Version="8.0.0" />
    <PackageReference Include="Microsoft.Extensions.Hosting" Version="8.0.0" />
  </ItemGroup>
</Project>
```

---

## Организация кода в файлах

### Пример структуры класса Entity

```csharp
// MeetingAssistant.Domain/Entities/Meeting.cs
namespace MeetingAssistant.Domain.Entities;

public class Meeting
{
    public Guid Id { get; private set; }
    public DateTime StartTime { get; private set; }
    public DateTime? EndTime { get; private set; }
    public MeetingStatus Status { get; private set; }
    public MeetingRecording? Recording { get; private set; }
    public MeetingReport? Report { get; private set; }
    
    // Конструкторы, методы...
}
```

### Пример структуры Use Case

```csharp
// MeetingAssistant.Application/UseCases/Meeting/StartMeetingUseCase.cs
namespace MeetingAssistant.Application.UseCases.Meeting;

public class StartMeetingUseCase
{
    private readonly IMeetingService _meetingService;
    private readonly IAudioRecorder _audioRecorder;
    
    public StartMeetingUseCase(
        IMeetingService meetingService,
        IAudioRecorder audioRecorder)
    {
        _meetingService = meetingService;
        _audioRecorder = audioRecorder;
    }
    
    public async Task<Meeting> ExecuteAsync(CancellationToken cancellationToken = default)
    {
        // Логика...
    }
}
```

### Пример структуры ViewModel

```csharp
// MeetingAssistant.Presentation/ViewModels/MainViewModel.cs
namespace MeetingAssistant.Presentation.ViewModels;

public class MainViewModel : BaseViewModel
{
    private readonly IMeetingService _meetingService;
    private readonly IWindowService _windowService;
    
    // Properties с уведомлениями
    // Commands
    // Методы
}
```

---

## Правила именования

### Классы
- **Entities**: `Meeting`, `MeetingRecording` (существительные)
- **Use Cases**: `StartMeetingUseCase`, `TranslateTextUseCase` (глагол + существительное + UseCase)
- **Services**: `MeetingService`, `TranslationService` (существительное + Service)
- **ViewModels**: `MainViewModel`, `TranslationViewModel` (существительное + ViewModel)
- **Repositories**: `MeetingRepository`, `RecordingRepository` (существительное + Repository)

### Интерфейсы
- Все интерфейсы начинаются с `I`: `IMeetingService`, `IAudioRecorder`

### Методы
- Асинхронные методы заканчиваются на `Async`: `StartAsync()`, `ProcessAsync()`
- Методы получения данных: `GetById()`, `GetAll()`
- Методы сохранения: `Save()`, `Add()`, `Update()`

### Файлы
- Один класс/интерфейс на файл
- Имя файла совпадает с именем класса/интерфейса

---

## Следующие шаги после создания структуры

1. **Создать Solution и проекты** в Visual Studio или через dotnet CLI
2. **Настроить зависимости** между проектами
3. **Установить NuGet пакеты** для каждого проекта
4. **Создать базовые классы** (BaseViewModel, BaseEntity, etc.)
5. **Настроить DI контейнер** в App.xaml.cs
6. **Создать базовую структуру UI** (MainWindow)
7. **Реализовать функциональность поэтапно**

---

## Примечания

- Все пути к файлам должны быть конфигурируемыми
- Использовать относительные пути для портативности
- Логирование всех важных операций
- Обработка исключений на всех уровнях
- Валидация входных данных
- Асинхронность для всех I/O операций

